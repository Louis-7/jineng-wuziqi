import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

const storedLang = typeof window !== 'undefined' ? window.localStorage.getItem('lang') : null;
const fallbackLng = 'zh';
const lang = storedLang || fallbackLng;

// Deliberately ignore the returned promise because i18n init is synchronous for static resources
void i18n.use(initReactI18next).init({
  resources: {
    zh: {
      translation: {
        'app.title': '技能五子棋',
        'app.subtitle': '五子棋 + 技能卡，策略与运气的较量',
        'nav.newMatch': '新对局',
        'nav.settings': '设置',
        'nav.help': '帮助',
        'ai.thinking': '🤖思考中...',
        'log.title': '回合日志',
        'log.empty': '暂无回合。',
        'log.turn': '回合 {{n}} – P{{p}} {{who}}',
        'log.player.human': '(玩家)',
        'log.player.ai': '(AI)',
        'status.current': '当前',
        'status.deck': '牌堆',
        'status.discard': '弃牌',
        'status.freeze': '冻结',
        'status.winner': '胜者',
        'panel.drawn': '抽牌',
        'panel.chosen': '已选',
        'panel.chosen.targetPrompt': '— 请选择棋盘目标',
        'panel.chosen.autoResolves': '— 自动结算',
        'panel.gameOver': '游戏结束 — 开始新对局再玩。',
        'settings.title': '设置',
        'settings.close': '关闭',
        'settings.boardTheme': '棋盘主题',
        'settings.boardTheme.modern': '现代',
        'settings.boardTheme.classic': '经典',
        'settings.boardTheme.modern.desc': '浅色',
        'settings.boardTheme.classic.desc': '木质',
        'settings.selected': '已选择',
        'settings.reset': '重置',
        'settings.save': '保存',
        'settings.language': '语言',
        'newMatch.title': '新对局',
        'newMatch.close': '关闭',
        'newMatch.seed': '随机种子',
        'newMatch.policy': '同时成五规则',
        'newMatch.policy.attacker': '进攻方胜',
        'newMatch.policy.draw': '平局',
        'newMatch.opponent': '对手',
        'newMatch.opponent.human': '本地玩家2',
        'newMatch.opponent.bot': 'AI机器人',
        'newMatch.aiStrategy': 'AI策略',
        'newMatch.aiStrategy.random': '简单',
        'newMatch.aiStrategy.heuristic': '困难',
        'newMatch.deckNote': '牌组将根据种子确定性生成。',
        'newMatch.reset': '重置',
        'newMatch.start': '开始',
        'help.title': '帮助',
        'help.close': '关闭',
        'help.p1':
          '通过在水平、垂直或斜线上连成五子获胜。使用技能卡来落子、移除、冻结回合、反转棋色或生成棋子。',
        'help.li1': '每个回合开始时抽两张牌，选择一张使用，另一张弃置。',
        'help.li2': '某些卡需要选择目标格；按照屏幕提示操作。',
        'help.li3': '若双方同时成五，依据所选规则判定胜负。',
        // Card meta (names / descriptions)
        'card.Place.name': '落子无悔',
        'card.Place.desc': '在棋盘上放置一枚棋子。',
        'card.Take.name': '飞沙走石',
        'card.Take.desc': '顾名思义，就是把对手的棋子直接扔掉。',
        'card.PolarityInversion.name': '两极反转',
        'card.PolarityInversion.desc': '乾坤倒转，黑白互换，瞬间变天！',
        'card.SpontaneousGeneration.name': '天女散花',
        'card.SpontaneousGeneration.desc': '天女撒下五枚神秘棋子，落点全凭天意。',
      },
    },
    en: {
      translation: {
        'app.title': 'Jineng Wuziqi',
        'app.subtitle': 'Gomoku + Cards',
        'nav.newMatch': 'New Match',
        'nav.settings': 'Settings',
        'nav.help': 'Help',
        'ai.thinking': '🤖 thinking...',
        'log.title': 'Turn Log',
        'log.empty': 'No turns yet.',
        'log.turn': 'Turn {{n}} – P{{p}} {{who}}',
        'log.player.human': '(Human)',
        'log.player.ai': '(AI)',
        'status.current': 'Current',
        'status.deck': 'Deck',
        'status.discard': 'Discard',
        'status.freeze': 'Freeze',
        'status.winner': 'Winner',
        'panel.drawn': 'Drawn',
        'panel.chosen': 'Chosen',
        'panel.chosen.targetPrompt': '— pick a target on the board',
        'panel.chosen.autoResolves': '— auto-resolves',
        'panel.gameOver': 'Game over — start a new match to play again.',
        'settings.title': 'Settings',
        'settings.close': 'Close',
        'settings.boardTheme': 'Board Theme',
        'settings.boardTheme.modern': 'Modern',
        'settings.boardTheme.classic': 'Classic',
        'settings.boardTheme.modern.desc': 'Light neutral',
        'settings.boardTheme.classic.desc': 'Wooden',
        'settings.selected': 'Selected',
        'settings.reset': 'Reset',
        'settings.save': 'Save',
        'settings.language': 'Language',
        'newMatch.title': 'New Match',
        'newMatch.close': 'Close',
        'newMatch.seed': 'Seed',
        'newMatch.policy': 'Simultaneous Five Policy',
        'newMatch.policy.attacker': 'Attacker wins',
        'newMatch.policy.draw': 'Draw',
        'newMatch.opponent': 'Opponent',
        'newMatch.opponent.human': 'Local Player 2',
        'newMatch.opponent.bot': 'AI Bot (baseline)',
        'newMatch.aiStrategy': 'AI Strategy',
        'newMatch.aiStrategy.random': 'Easy',
        'newMatch.aiStrategy.heuristic': 'Hard',
        'newMatch.deckNote': 'Deck will be generated deterministically from the seed.',
        'newMatch.reset': 'Reset to defaults',
        'newMatch.start': 'Start',
        'help.title': 'Help',
        'help.close': 'Close',
        'help.p1':
          'Place five stones in a row (horizontal, vertical, or diagonal) to win. Use skill cards to place, remove, freeze turns, invert polarity, or spawn stones.',
        'help.li1':
          'Draw two cards at start of your turn, choose one to play; the other is discarded.',
        'help.li2': 'Some cards require selecting a target cell; follow the on-screen prompt.',
        'help.li3':
          'If both players complete five simultaneously, the winner is determined by the selected policy.',
        // Card meta (names / descriptions)
        'card.Place.name': 'Place Stone',
        'card.Place.desc': 'Place one stone on an empty cell.',
        'card.Take.name': 'Take Stone',
        'card.Take.desc': "Remove an opponent's stone.",
        'card.PolarityInversion.name': 'Polarity Inversion',
        'card.PolarityInversion.desc': 'Swap ownership of all stones (1 ↔ 2).',
        'card.SpontaneousGeneration.name': 'Spontaneous Generation',
        'card.SpontaneousGeneration.desc':
          'Randomly place 5 stones with random colors on empty cells.',
      },
    },
  },
  lng: lang,
  fallbackLng,
  interpolation: { escapeValue: false },
});

export default i18n;
