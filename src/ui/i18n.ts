import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

const storedLang = typeof window !== 'undefined' ? window.localStorage.getItem('lang') : null;
const fallbackLng = 'zh';
const lang = storedLang || fallbackLng;

// Deliberately ignore the returned promise because i18n init is synchronous for static resources
void i18n.use(initReactI18next).init({
  resources: {
    zh: {
      translation: {
        'app.title': 'æŠ€èƒ½äº”å­æ£‹',
        'app.subtitle': 'äº”å­æ£‹ + æŠ€èƒ½å¡ï¼Œç­–ç•¥ä¸è¿æ°”çš„è¾ƒé‡',
        'nav.newMatch': 'æ–°å¯¹å±€',
        'nav.settings': 'è®¾ç½®',
        'nav.help': 'å¸®åŠ©',
        'ai.thinking': 'ğŸ¤–æ€è€ƒä¸­...',
        'log.title': 'å›åˆæ—¥å¿—',
        'log.empty': 'æš‚æ— å›åˆã€‚',
        'log.turn': 'å›åˆ {{n}} â€“ P{{p}} {{who}}',
        'log.player.human': '(ç©å®¶)',
        'log.player.ai': '(AI)',
        'status.current': 'å½“å‰',
        'status.deck': 'ç‰Œå †',
        'status.discard': 'å¼ƒç‰Œ',
        'status.freeze': 'å†»ç»“',
        'status.winner': 'èƒœè€…',
        'panel.drawn': 'æŠ½ç‰Œ',
        'panel.chosen': 'å·²é€‰',
        'panel.chosen.targetPrompt': 'â€” è¯·é€‰æ‹©æ£‹ç›˜ç›®æ ‡',
        'panel.chosen.autoResolves': 'â€” è‡ªåŠ¨ç»“ç®—',
        'panel.gameOver': 'æ¸¸æˆç»“æŸ â€” å¼€å§‹æ–°å¯¹å±€å†ç©ã€‚',
        'settings.title': 'è®¾ç½®',
        'settings.close': 'å…³é—­',
        'settings.boardTheme': 'æ£‹ç›˜ä¸»é¢˜',
        'settings.boardTheme.modern': 'ç°ä»£',
        'settings.boardTheme.classic': 'ç»å…¸',
        'settings.boardTheme.modern.desc': 'æµ…è‰²',
        'settings.boardTheme.classic.desc': 'æœ¨è´¨',
        'settings.selected': 'å·²é€‰æ‹©',
        'settings.reset': 'é‡ç½®',
        'settings.save': 'ä¿å­˜',
        'settings.language': 'è¯­è¨€',
        'newMatch.title': 'æ–°å¯¹å±€',
        'newMatch.close': 'å…³é—­',
        'newMatch.seed': 'éšæœºç§å­',
        'newMatch.policy': 'åŒæ—¶æˆäº”è§„åˆ™',
        'newMatch.policy.attacker': 'è¿›æ”»æ–¹èƒœ',
        'newMatch.policy.draw': 'å¹³å±€',
        'newMatch.opponent': 'å¯¹æ‰‹',
        'newMatch.opponent.human': 'æœ¬åœ°ç©å®¶2',
        'newMatch.opponent.bot': 'AIæœºå™¨äºº',
        'newMatch.aiStrategy': 'AIç­–ç•¥',
        'newMatch.aiStrategy.random': 'ç®€å•',
        'newMatch.aiStrategy.heuristic': 'å›°éš¾',
        'newMatch.deckNote': 'ç‰Œç»„å°†æ ¹æ®ç§å­ç¡®å®šæ€§ç”Ÿæˆã€‚',
        'newMatch.reset': 'é‡ç½®',
        'newMatch.start': 'å¼€å§‹',
        'help.title': 'å¸®åŠ©',
        'help.close': 'å…³é—­',
        'help.p1':
          'é€šè¿‡åœ¨æ°´å¹³ã€å‚ç›´æˆ–æ–œçº¿ä¸Šè¿æˆäº”å­è·èƒœã€‚ä½¿ç”¨æŠ€èƒ½å¡æ¥è½å­ã€ç§»é™¤ã€å†»ç»“å›åˆã€åè½¬æ£‹è‰²æˆ–ç”Ÿæˆæ£‹å­ã€‚',
        'help.li1': 'æ¯ä¸ªå›åˆå¼€å§‹æ—¶æŠ½ä¸¤å¼ ç‰Œï¼Œé€‰æ‹©ä¸€å¼ ä½¿ç”¨ï¼Œå¦ä¸€å¼ å¼ƒç½®ã€‚',
        'help.li2': 'æŸäº›å¡éœ€è¦é€‰æ‹©ç›®æ ‡æ ¼ï¼›æŒ‰ç…§å±å¹•æç¤ºæ“ä½œã€‚',
        'help.li3': 'è‹¥åŒæ–¹åŒæ—¶æˆäº”ï¼Œä¾æ®æ‰€é€‰è§„åˆ™åˆ¤å®šèƒœè´Ÿã€‚',
        // Card meta (names / descriptions)
        'card.Place.name': 'è½å­æ— æ‚”',
        'card.Place.desc': 'åœ¨æ£‹ç›˜ä¸Šæ”¾ç½®ä¸€æšæ£‹å­ã€‚',
        'card.Take.name': 'é£æ²™èµ°çŸ³',
        'card.Take.desc': 'é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯æŠŠå¯¹æ‰‹çš„æ£‹å­ç›´æ¥æ‰”æ‰ã€‚',
        'card.PolarityInversion.name': 'ä¸¤æåè½¬',
        'card.PolarityInversion.desc': 'ä¹¾å¤å€’è½¬ï¼Œé»‘ç™½äº’æ¢ï¼Œç¬é—´å˜å¤©ï¼',
        'card.SpontaneousGeneration.name': 'å¤©å¥³æ•£èŠ±',
        'card.SpontaneousGeneration.desc': 'å¤©å¥³æ’’ä¸‹äº”æšç¥ç§˜æ£‹å­ï¼Œè½ç‚¹å…¨å‡­å¤©æ„ã€‚',
      },
    },
    en: {
      translation: {
        'app.title': 'Jineng Wuziqi',
        'app.subtitle': 'Gomoku + Cards',
        'nav.newMatch': 'New Match',
        'nav.settings': 'Settings',
        'nav.help': 'Help',
        'ai.thinking': 'ğŸ¤– thinking...',
        'log.title': 'Turn Log',
        'log.empty': 'No turns yet.',
        'log.turn': 'Turn {{n}} â€“ P{{p}} {{who}}',
        'log.player.human': '(Human)',
        'log.player.ai': '(AI)',
        'status.current': 'Current',
        'status.deck': 'Deck',
        'status.discard': 'Discard',
        'status.freeze': 'Freeze',
        'status.winner': 'Winner',
        'panel.drawn': 'Drawn',
        'panel.chosen': 'Chosen',
        'panel.chosen.targetPrompt': 'â€” pick a target on the board',
        'panel.chosen.autoResolves': 'â€” auto-resolves',
        'panel.gameOver': 'Game over â€” start a new match to play again.',
        'settings.title': 'Settings',
        'settings.close': 'Close',
        'settings.boardTheme': 'Board Theme',
        'settings.boardTheme.modern': 'Modern',
        'settings.boardTheme.classic': 'Classic',
        'settings.boardTheme.modern.desc': 'Light neutral',
        'settings.boardTheme.classic.desc': 'Wooden',
        'settings.selected': 'Selected',
        'settings.reset': 'Reset',
        'settings.save': 'Save',
        'settings.language': 'Language',
        'newMatch.title': 'New Match',
        'newMatch.close': 'Close',
        'newMatch.seed': 'Seed',
        'newMatch.policy': 'Simultaneous Five Policy',
        'newMatch.policy.attacker': 'Attacker wins',
        'newMatch.policy.draw': 'Draw',
        'newMatch.opponent': 'Opponent',
        'newMatch.opponent.human': 'Local Player 2',
        'newMatch.opponent.bot': 'AI Bot (baseline)',
        'newMatch.aiStrategy': 'AI Strategy',
        'newMatch.aiStrategy.random': 'Easy',
        'newMatch.aiStrategy.heuristic': 'Hard',
        'newMatch.deckNote': 'Deck will be generated deterministically from the seed.',
        'newMatch.reset': 'Reset to defaults',
        'newMatch.start': 'Start',
        'help.title': 'Help',
        'help.close': 'Close',
        'help.p1':
          'Place five stones in a row (horizontal, vertical, or diagonal) to win. Use skill cards to place, remove, freeze turns, invert polarity, or spawn stones.',
        'help.li1':
          'Draw two cards at start of your turn, choose one to play; the other is discarded.',
        'help.li2': 'Some cards require selecting a target cell; follow the on-screen prompt.',
        'help.li3':
          'If both players complete five simultaneously, the winner is determined by the selected policy.',
        // Card meta (names / descriptions)
        'card.Place.name': 'Place Stone',
        'card.Place.desc': 'Place one stone on an empty cell.',
        'card.Take.name': 'Take Stone',
        'card.Take.desc': "Remove an opponent's stone.",
        'card.PolarityInversion.name': 'Polarity Inversion',
        'card.PolarityInversion.desc': 'Swap ownership of all stones (1 â†” 2).',
        'card.SpontaneousGeneration.name': 'Spontaneous Generation',
        'card.SpontaneousGeneration.desc':
          'Randomly place 5 stones with random colors on empty cells.',
      },
    },
  },
  lng: lang,
  fallbackLng,
  interpolation: { escapeValue: false },
});

export default i18n;
